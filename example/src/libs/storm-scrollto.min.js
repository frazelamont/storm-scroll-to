!function(t,e){"object"==typeof exports?module.exports=e():t.StormScrollTo=e()}(this,function(){"use strict";function t(t,e){var n=[].slice.call(document.querySelectorAll(t));if(0===n.length)throw new Error("ScrollTo cannot be initialised, no augmentable elements found");return i=Object.assign(Object.create(r),{DOMElements:n,settings:Object.assign({},u,e)}).init()}function e(e,n){t(e,n)}function n(){i.destroy(),i=null}var i,o=["click","keydown"],s={EASING:{easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeOutQuint:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInOutQuint:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e}}},u={easing:"easeInOutCubic",speed:260,offset:0,pushState:!0,focus:!0,callback:null},r={init:function(){return this.initNavItems(),this.initListeners(),this.initFocusable(),this},initNavItems:function(){this.navItems=this.DOMElements.map(function(t){return{node:t,target:document.querySelector(t.getAttribute("href"))||null}})},initListeners:function(){this.navItems.forEach(function(t){o.forEach(function(e){t.node.addEventListener(e,function(e){e.preventDefault(),this.scrollTo(t)}.bind(this),!1)}.bind(this))}.bind(this))},initFocusable:function(){if(this.settings.focus){var t=function(t){var e=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex="-1"])'];return[].slice.call(t.querySelectorAll(e.join(","))).filter(function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)})};return this.navItems.forEach(function(e){e.focusableChildren=t(e.target)}),this}},scrollTo:function(t){var e=(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),window.pageYOffset),n=t.target.offsetTop-this.settings.offset,i=n-e,o=this.settings.speed,u=function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t},r=0,c=16,a=function(){r+=c,u(s.EASING[this.settings.easing](r,e,i,o)),r<o?window.requestAnimationFrame(a.bind(this)):(!!this.settings.pushState&&!!window.history.pushState&&window.history.pushState({URL:t.node.getAttribute("href")},"",t.node.getAttribute("href")),!!this.settings.focus&&!!t.focusableChildren.length&&window.setTimeout(function(){t.focusableChildren[0].focus()}.bind(this),0),!!this.settings.callback&&this.settings.callback())}.bind(this);a()},destroy:function(){this.navItems.forEach(function(t){o.forEach(function(e){t.node.removeEventListener(e,function(e){e.preventDefault(),this.scrollTo(t)}.bind(this))}.bind(this))}.bind(this))}};return{init:t,reload:e,destroy:n}});